<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "1ad5de6a6388d02c145a92dd04358bab",
  "translation_date": "2025-06-11T04:55:12+00:00",
  "source_file": "10-ai-agents-production/README.md",
  "language_code": "ja"
}
-->
[![AI Agents In Production](../../../10-ai-agents-production/images/lesson-10-thumbnail.png)](https://youtu.be/l4TP6IyJxmQ?si=IvCW3cbw0NJ2mUMV)

> _(上の画像をクリックすると、このレッスンの動画が見られます)_
# AIエージェントの本番運用

## はじめに

このレッスンでは以下について説明します：

- AIエージェントを本番環境に効果的に展開するための計画方法
- AIエージェントを本番展開する際に直面しやすい一般的なミスや問題点
- AIエージェントのパフォーマンスを維持しつつコストを管理する方法

## 学習目標

このレッスンを終えた後、以下のことができるようになります／理解できます：

- 本番環境のAIエージェントシステムのパフォーマンス、コスト、効果を改善するための手法
- AIエージェントの評価方法と評価すべきポイント
- AIエージェントを本番展開する際のコストコントロール方法

信頼できるAIエージェントを展開することは非常に重要です。「Building Trustworthy AI Agents」のレッスンもぜひご覧ください。

## AIエージェントの評価

AIエージェントを展開する前、展開中、展開後に適切な評価システムを持つことは非常に重要です。これにより、システムがあなたやユーザーの目標に沿っていることを確認できます。

AIエージェントを評価するには、エージェントの出力だけでなく、AIエージェントが動作しているシステム全体を評価できることが重要です。これには以下が含まれますが、これらに限定されません：

- 最初のモデルへのリクエスト
- ユーザーの意図を特定するエージェントの能力
- タスクを実行するために適切なツールを選択するエージェントの能力
- ツールがエージェントのリクエストに応答すること
- ツールの応答を解釈するエージェントの能力
- エージェントの応答に対するユーザーのフィードバック

これにより、改善すべき箇所をよりモジュール的に特定でき、モデル、プロンプト、ツール、その他のコンポーネントの変更がどのような影響を与えるかを効率的にモニタリングできます。

## AIエージェントのよくある問題とその解決策

| **問題**                                        | **考えられる解決策**                                                                                                                                                                                                         |
| ---------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| AIエージェントがタスクを一貫して実行しない       | - AIエージェントに与えるプロンプトを明確にし、目的をはっきりさせる。<br>- タスクを細分化し、複数のエージェントで処理する方法を検討する。                                                                                   |
| AIエージェントが無限ループに陥る                 | - 明確な終了条件を設定し、エージェントがいつ処理を停止すべきか理解できるようにする。<br>- 推論や計画が必要な複雑なタスクには、推論に特化した大きなモデルを使用する。                                                       |
| AIエージェントのツール呼び出しがうまく機能しない | - エージェントシステム外でツールの出力をテスト・検証する。<br>- ツールのパラメータ、プロンプト、名称を見直す。                                                                                                             |
| マルチエージェントシステムが一貫して動作しない   | - 各エージェントに与えるプロンプトを具体的かつ明確にし、他のエージェントと区別する。<br>- 「ルーティング」やコントローラー役のエージェントを使った階層型システムを構築し、適切なエージェントを選択する。              |

## コスト管理

AIエージェントを本番展開する際のコスト管理に役立つ戦略は以下の通りです：

- **レスポンスのキャッシュ** — よくあるリクエストやタスクを特定し、それらのレスポンスをエージェントシステムに入る前に提供することで、類似リクエストの数を減らせます。より基本的なAIモデルを使って、リクエストがキャッシュ済みのものとどれくらい似ているかを判定するフローを実装することも可能です。

- **小型モデルの活用** — Small Language Models（SLMs）は特定のエージェント用途で良好なパフォーマンスを発揮し、コストを大幅に削減できます。前述のように、評価システムを構築して大きなモデルと性能を比較することが、SLMが自分のユースケースでどれだけ効果的か理解する最良の方法です。

- **ルーターモデルの利用** — 複数のモデルやサイズを使い分ける戦略もあります。LLM/SLMやサーバーレス関数を用いて、リクエストの複雑さに応じて最適なモデルに振り分けることができます。これによりコスト削減とパフォーマンス維持の両立が可能です。

## おめでとうございます

これで「AI Agents for Beginners」の最後のレッスンとなります。

この急速に成長する業界の変化やフィードバックに基づき、今後もレッスンを追加していく予定ですので、また近いうちにお越しください。

AIエージェントの学習や開発を続けたい方は、<a href="https://discord.gg/kzRShWzttr" target="_blank">Azure AI Community Discord</a>にぜひ参加してください。

ワークショップ、コミュニティのラウンドテーブル、そして「何でも質問」セッションを開催しています。

また、本番環境でAIエージェントを構築するための追加資料をまとめたLearnコレクションも用意しています。

## 前のレッスン

[Metacognition Design Pattern](../09-metacognition/README.md)

**免責事項**:  
本書類はAI翻訳サービス「Co-op Translator」（https://github.com/Azure/co-op-translator）を使用して翻訳されています。正確性には努めておりますが、自動翻訳には誤りや不正確な箇所が含まれる可能性があります。原文の言語によるオリジナル文書が正式な情報源とみなされるべきです。重要な情報については、専門の人間による翻訳を推奨します。本翻訳の利用により生じた誤解や解釈の相違について、当方は一切の責任を負いかねます。